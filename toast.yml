image: node:12.13.0-alpine
default: build
tasks:
  npm_install:
    input_paths:
      - npm-shrinkwrap.json
      - package.json
    command: npm install
  build:
    dependencies:
      - npm_install
    input_paths:
      - src
      - webpack.config.js
    output_paths:
      - dist
    command: npx webpack --mode production
  serve:
    cache: false
    dependencies:
      - npm_install
    mount_paths:
      - src
    input_paths:
      - webpack.config.js
    ports:
      - 8080:8080
    command: npx webpack-dev-server --mode development --host 0.0.0.0
